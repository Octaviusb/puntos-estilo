let x;

// Función autoejecutable
(function() {
    "use strict";
    
    // Cargar estilos externos
    if (document.createStyleSheet) {
        document.createStyleSheet("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.css");
    } else {
        const styles = `
            @import "https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap";
            :root { --color: #fff; }
            .pqt {
                width: 420px;
                padding: 30px 20px;
                position: absolute;
                top: 0;
                right: 0;
                overflow: hidden;
                font-family: "Poppins", sans-serif;
                display: none;
            }
            .tst {
                width: 380px;
                height: auto;
                padding: 20px;
                background-color: #fff;
                border: 1px solid var(--color);
                box-shadow: 0 10px 20px rgba(75, 50, 50, 0.05);
                border-left: 8px solid var(--color);
                border-radius: 7px;
                display: grid;
                grid-template-columns: 1.2fr 6fr 0.5fr;
                transform: translate(400px);
                transition: 0.5s;
                line-height: 1;
            }
            .cnte, .cnti { align-self: center; }
            .cnti span {
                font-size: 40px;
                color: var(--color);
            }
            .cnte p:first-child {
                color: #101020;
                font-weight: 600;
                font-size: 16px;
                line-height: 1;
            }
            .cnte p:last-child {
                font-size: 13px;
                color: #656565;
                font-weight: 400;
                line-height: 1;
            }
            .tst .btcl {
                align-self: flex-start;
                background-color: transparent;
                font-size: 25px;
                line-height: 0;
                color: #656565;
                cursor: pointer;
                border: none;
            }
            .cnti .i-fa::before {
                font-family: FontAwesome;
                content: var(--content);
            }
            @media only screen and (max-width: 768px) {
                .pqt { width: 360px; }
                .tst { width: 320px; }
                .cnte { margin-left: 15px; }
            }
        `;
        let link = document.createElement("link");
        let style = document.createElement("style");
        style.innerText = styles;
        link.rel = "stylesheet";
        link.href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.css";
        document.head.appendChild(link);
        document.head.appendChild(style);
    }
    
    const notificationContainerId = "pqt";
    
    // Función para crear elementos
    function createElement(tag, parentId, id, className, innerHTML) {
        let element = document.createElement(tag);
        element.id = id;
        if (className) element.className = className;
        if (innerHTML) element.innerHTML = innerHTML;
        document.getElementById(parentId).appendChild(element);
    }
    
    // Crear estructura HTML para la notificación
    (function() {
        let container = document.createElement("div");
        let existingElement = document.getElementById(notificationContainerId);
        document.body.insertBefore(container, existingElement);
        container.id = notificationContainerId;
        container.className = notificationContainerId;
    })();
    
    createElement("div", notificationContainerId, "tst", "tst");
    createElement("div", "tst", "cnti", "cnti");
    createElement("div", "tst", "cnte", "cnte");
    createElement("span", "cnti", "ifa", "i-fa");
    createElement("p", "cnte", "p1", "p1");
    createElement("p", "cnte", "p2", "p2");
    createElement("button", "tst", "btcl", "btcl", "&times;");
})();

let pqt = document.querySelector(".pqt");
let tst = document.querySelector(".tst");

// Función para mostrar notificaciones
function tshow(type, title, message, duration = 3000) {
    pqt.style.display = "block";
    setTimeout(() => {
        if (type === "success") {
            document.documentElement.style.setProperty("--color", "#47d764");
            document.documentElement.style.setProperty("--content", "\\f058");
        } else if (type === "danger") {
            document.documentElement.style.setProperty("--color", "#dd3c64");
            document.documentElement.style.setProperty("--content", "\\f057");
        } else if (type === "warning") {
            document.documentElement.style.setProperty("--color", "#f0d663");
            document.documentElement.style.setProperty("--content", "\\f071");
        } else if (type === "info") {
            document.documentElement.style.setProperty("--color", "#a2eefc");
            document.documentElement.style.setProperty("--content", "\\f05a");
        }
        document.getElementById("p1").innerHTML = title;
        document.getElementById("p2").innerHTML = message;
        clearTimeout(x);
        tst.style.transform = "translateX(0)";
        x = setTimeout(() => {
            tst.style.transform = "translateX(400px)";
            setTimeout(() => {
                pqt.style.display = "none";
            }, 100);
        }, duration);
    }, 200);
}

// Evento para cerrar la notificación al hacer clic
tst.addEventListener("click", () => {
    tst.style.transform = "translateX(400px)";
    pqt.style.display = "none";
});